"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[399],{8399:function(a,e,t){t.r(e),t.d(e,{default:function(){return Ca}});var r=t(3396),s=t(9242),l=t(7139);const o=a=>((0,r.dD)("data-v-e8bb04f6"),a=a(),(0,r.Cn)(),a),n={id:"app"},i=o((()=>(0,r._)("nav",{class:"main-menu"},[(0,r._)("strong",null,"PANEL DE ADMINISTRACION"),(0,r._)("ul")],-1))),c={class:"content"},d={class:"left-content"},u={class:"card"},p={class:"card-body"},m=o((()=>(0,r._)("br",null,null,-1))),f=o((()=>(0,r._)("br",null,null,-1))),_=o((()=>(0,r._)("h5",{class:"card-title"},"Creación de Restaurante",-1))),b=o((()=>(0,r._)("p",{class:"card-text"},"En este espacio creamos nuevos restaurantes para COSTA BRISA",-1))),h=(0,r.uE)('<div class="card" data-v-e8bb04f6><div class="card-body" data-v-e8bb04f6><br data-v-e8bb04f6><br data-v-e8bb04f6><h5 class="card-title" data-v-e8bb04f6>¡Crea tu Galeria!</h5><p class="card-text" data-v-e8bb04f6>En este espacio podrás publicar tu álbum de fotografías</p><button class="btn btn-success mb-4" data-v-e8bb04f6>Crear Galería</button></div></div>',1),g={ref:"modalCrear",class:"modal fade",id:"modalCrear",tabindex:"",role:"dialog","aria-labelledby":"modalCrearLabel","aria-hidden":"true"},v={class:"modal-dialog modal-dialog-centered",role:"document"},R={class:"modal-content"},z={class:"modal-header"},A=o((()=>(0,r._)("h5",{class:"modal-title",id:"modalCrearLabel"},"Crear Restaurante",-1))),y=o((()=>(0,r._)("span",{"aria-hidden":"true"},"×",-1))),w=[y],C={class:"modal-body"},x={class:"form-group col-md-6"},M=o((()=>(0,r._)("label",{for:"nombreRestaurante"},"Nombre:",-1))),k={class:"form-group col-md-6"},D=o((()=>(0,r._)("label",{for:"descripcionRestaurante"},"Descripción:",-1))),E={class:"form-group col-md-6"},I=o((()=>(0,r._)("label",{for:"direccionRestaurante"},"Dirección:",-1))),U={class:"form-group col-md-6"},q=o((()=>(0,r._)("label",{for:"imagenRestaurante"},"Imagen:",-1))),L={class:"form-group col-md-6"},S=o((()=>(0,r._)("label",{for:"telefonoRestaurante"},"Teléfono:",-1))),V={class:"form-group col-md-6"},F=o((()=>(0,r._)("label",{for:"precioRestaurante"},"Precio:",-1))),T=o((()=>(0,r._)("div",{class:"form-group col-md-12"},[(0,r._)("button",{type:"submit",class:"btn btn-primary"},"Crear Restaurante")],-1))),$={class:"right-content"},N=o((()=>(0,r._)("strong",null,"RESTAURANTES ACTUALES",-1))),Z={class:"row"},j={class:"card"},G=["src"],P={class:"card-body"},O={class:"card-title"},B={class:"card-text"},H={class:"card-text"},K={class:"card-text"},Y=["onClick"],J=["onClick"],Q={ref:"modalActualizar",class:"modal fade",id:"modalActualizar",tabindex:"-1",role:"dialog","aria-labelledby":"modalActualizarLabel","aria-hidden":"true"},W={class:"modal-dialog modal-dialog-centered",role:"document"},X={class:"modal-content"},aa={class:"modal-header"},ea=o((()=>(0,r._)("h5",{class:"modal-title",id:"modalActualizarLabel"},"Actualizar Restaurante",-1))),ta=o((()=>(0,r._)("span",{"aria-hidden":"true"},"×",-1))),ra=[ta],sa={class:"modal-body"},la={class:"form-group col-md-6"},oa=o((()=>(0,r._)("label",{for:"nombreRestauranteActualizar"},"Nombre:",-1))),na={class:"form-group col-md-6"},ia=o((()=>(0,r._)("label",{for:"descripcionRestauranteActualizar"},"Descripción:",-1))),ca={class:"form-group col-md-6"},da=o((()=>(0,r._)("label",{for:"direccionRestauranteActualizar"},"Dirección:",-1))),ua={class:"form-group col-md-6"},pa=o((()=>(0,r._)("label",{for:"imagenRestauranteActualizar"},"Imagen:",-1))),ma={class:"form-group col-md-6"},fa=o((()=>(0,r._)("label",{for:"telefonoRestauranteActualizar"},"Teléfono:",-1))),_a={class:"form-group col-md-6"},ba=o((()=>(0,r._)("label",{for:"precioRestauranteActualizar"},"Precio:",-1))),ha=o((()=>(0,r._)("div",{class:"form-group col-md-12"},[(0,r._)("button",{type:"submit",class:"btn btn-primary"},"Guardar Cambios")],-1))),ga={class:"modal-footer"},va={key:0,class:"text-success"};function Ra(a,e,t,o,y,ta){return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("main",null,[i,(0,r._)("section",c,[(0,r._)("div",d,[(0,r._)("div",u,[(0,r._)("div",p,[m,f,_,b,(0,r._)("button",{class:"btn btn-success mb-4",onClick:e[0]||(e[0]=(...a)=>ta.abrirModalCrear&&ta.abrirModalCrear(...a))},"Crear")])]),h,(0,r._)("div",g,[(0,r._)("div",v,[(0,r._)("div",R,[(0,r._)("div",z,[A,(0,r._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:e[1]||(e[1]=(...a)=>ta.cerrarModalCrear&&ta.cerrarModalCrear(...a))},w)]),(0,r._)("div",C,[(0,r._)("form",{onSubmit:e[8]||(e[8]=(0,s.iM)(((...a)=>ta.crearRestaurante&&ta.crearRestaurante(...a)),["prevent"])),class:"row"},[(0,r._)("div",x,[M,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>y.nuevoRestaurante.name=a),class:"form-control",id:"nombreRestaurante",required:""},null,512),[[s.nr,y.nuevoRestaurante.name]])]),(0,r._)("div",k,[D,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>y.nuevoRestaurante.description=a),class:"form-control",id:"descripcionRestaurante",required:""},null,512),[[s.nr,y.nuevoRestaurante.description]])]),(0,r._)("div",E,[I,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>y.nuevoRestaurante.address=a),class:"form-control",id:"direccionRestaurante",required:""},null,512),[[s.nr,y.nuevoRestaurante.address]])]),(0,r._)("div",U,[q,(0,r._)("input",{class:"form-control",accept:"image/jpeg, image/jpg, image/png",onChange:e[5]||(e[5]=(...a)=>ta.uploadFile&&ta.uploadFile(...a)),id:"imagenRestaurante",ref:"fileCrear",type:"file"},null,544)]),(0,r._)("div",L,[S,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=a=>y.nuevoRestaurante.phone=a),class:"form-control",id:"telefonoRestaurante",required:""},null,512),[[s.nr,y.nuevoRestaurante.phone]])]),(0,r._)("div",V,[F,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=a=>y.nuevoRestaurante.price=a),class:"form-control",id:"precioRestaurante",required:""},null,512),[[s.nr,y.nuevoRestaurante.price]])]),T],32)])])])],512)]),(0,r._)("div",$,[N,(0,r._)("div",Z,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(y.restaurantes,(a=>((0,r.wg)(),(0,r.iD)("div",{key:a._id,class:"col-md-12 mb-6"},[(0,r._)("div",j,[(0,r._)("img",{src:a.image,class:"card-img-top",style:{width:"100%",height:"200px"},alt:"Restaurante Image"},null,8,G),(0,r._)("div",P,[(0,r._)("h5",O,(0,l.zw)(a.name),1),(0,r._)("p",B,"Dirección: "+(0,l.zw)(a.address),1),(0,r._)("p",H,"Descripción: "+(0,l.zw)(a.description),1),(0,r._)("p",null,(0,l.zw)(a.price),1),(0,r._)("p",K,"Teléfono: "+(0,l.zw)(a.phone),1),(0,r._)("button",{class:"btn btn-danger",onClick:e=>ta.eliminarRestaurante(a._id)},"Eliminar",8,Y),(0,r._)("button",{class:"btn btn-primary",onClick:e=>ta.abrirModalActualizar(a)},"Actualizar",8,J)])])])))),128))])]),(0,r._)("div",Q,[(0,r._)("div",W,[(0,r._)("div",X,[(0,r._)("div",aa,[ea,(0,r._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:e[9]||(e[9]=(...a)=>ta.cerrarModalActualizar&&ta.cerrarModalActualizar(...a))},ra)]),(0,r._)("div",sa,[(0,r._)("form",{onSubmit:e[16]||(e[16]=(0,s.iM)(((...a)=>ta.actualizarRestaurante&&ta.actualizarRestaurante(...a)),["prevent"])),class:"row"},[(0,r._)("div",la,[oa,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=a=>y.restauranteActualizado.name=a),class:"form-control",id:"nombreRestauranteActualizar",required:""},null,512),[[s.nr,y.restauranteActualizado.name]])]),(0,r._)("div",na,[ia,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=a=>y.restauranteActualizado.description=a),class:"form-control",id:"descripcionRestauranteActualizar",required:""},null,512),[[s.nr,y.restauranteActualizado.description]])]),(0,r._)("div",ca,[da,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=a=>y.restauranteActualizado.address=a),class:"form-control",id:"direccionRestauranteActualizar",required:""},null,512),[[s.nr,y.restauranteActualizado.address]])]),(0,r._)("div",ua,[pa,(0,r._)("input",{class:"form-control",accept:"image/jpeg, image/jpg, image/png",onChange:e[13]||(e[13]=(...a)=>ta.uploadFileActualizar&&ta.uploadFileActualizar(...a)),id:"imagenRestauranteActualizar",ref:"fileActualizar",type:"file"},null,544)]),(0,r._)("div",ma,[fa,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=a=>y.restauranteActualizado.phone=a),class:"form-control",id:"telefonoRestauranteActualizar",required:""},null,512),[[s.nr,y.restauranteActualizado.phone]])]),(0,r._)("div",_a,[ba,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=a=>y.restauranteActualizado.price=a),class:"form-control",id:"precioRestauranteActualizar",required:""},null,512),[[s.nr,y.restauranteActualizado.price]])]),ha],32)]),(0,r._)("div",ga,[a.successMessage?((0,r.wg)(),(0,r.iD)("p",va,(0,l.zw)(a.successMessage),1)):(0,r.kq)("",!0)])])])],512)])])])}var za=t(1076),Aa={data(){return{restaurantes:[],restauranteActualizado:{_id:null,name:"",description:"",address:"",image:"",phone:"",price:""},file:null,fileActualizar:null,nuevoRestaurante:{name:"",description:"",address:"",image:"",phone:"",price:"",customer_id:""}}},async mounted(){await this.fetchRestaurantes()},methods:{async fetchRestaurantes(){let a=localStorage.getItem("customerId");try{const e=await za.Z.get("http://localhost:3000/app/Restaurante");!e.data||(this.restaurantes=e.data.filter((e=>e.customer_id===a)))}catch(e){console.error("Error fetching restaurantes:",e)}},async eliminarRestaurante(a){try{await za.Z.delete(`http://localhost:3000/app/Restaurante/${a}`),this.fetchRestaurantes()}catch(e){console.error("Error deleting restaurante:",e)}},abrirModalActualizar(a){this.restauranteActualizado={...a};const e=this.$refs.modalActualizar;e&&(e.classList.add("show"),e.style.display="block")},cerrarModalActualizar(){const a=this.$refs.modalActualizar;a&&(a.classList.remove("show"),a.style.display="none")},abrirModalCrear(){const a=this.$refs.modalCrear;a&&(a.classList.add("show"),a.style.display="block")},cerrarModalCrear(){const a=this.$refs.modalCrear;a&&(a.classList.remove("show"),a.style.display="none")},async crearRestaurante(){let a=localStorage.getItem("customerId");try{if(a){this.nuevoRestaurante.customer_id=a;const e=new FormData;e.append("image",this.file),e.append("name",this.nuevoRestaurante.name),e.append("description",this.nuevoRestaurante.description),e.append("address",this.nuevoRestaurante.address),e.append("phone",this.nuevoRestaurante.phone),e.append("price",this.nuevoRestaurante.price),e.append("customer_id",this.nuevoRestaurante.customer_id);const t=await za.Z.post("http://localhost:3000/app/Restaurante",e);console.log(t),this.nuevoRestaurante={name:"",description:"",address:"",image:"",phone:"",price:"",customer_id:""},this.cerrarModalCrear(),this.fetchRestaurantes()}}catch(e){console.error("Error creating Restaurante:",e)}},async actualizarRestaurante(){if(this.fileActualizar){const e=new FormData;e.append("name",this.restauranteActualizado.name),e.append("description",this.restauranteActualizado.description),e.append("address",this.restauranteActualizado.address),e.append("phone",this.restauranteActualizado.phone),e.append("price",this.restauranteActualizado.price),e.append("customer_id",this.restauranteActualizado.customer_id),e.append("imagen",this.fileActualizar),e.append("image","");try{const a=await za.Z.put(`http://localhost:3000/app/Restaurante/${this.restauranteActualizado._id}`,e);console.log(a),this.fetchRestaurantes(),this.cerrarModalActualizar(),this.fileActualizar=null}catch(a){console.error("Error updating Restaurante:",a)}}else try{const a=await za.Z.put(`http://localhost:3000/app/Restaurante/${this.restauranteActualizado._id}`,this.restauranteActualizado);console.log(a),this.fetchRestaurantes(),this.cerrarModalActualizar()}catch(a){console.error("Error updating Restaurante:",a)}},uploadFile(a){this.file=a.target.files[0]},uploadFileActualizar(a){this.fileActualizar=a.target.files[0]}}},ya=t(89);const wa=(0,ya.Z)(Aa,[["render",Ra],["__scopeId","data-v-e8bb04f6"]]);var Ca=wa}}]);
//# sourceMappingURL=399.8fcb38fa.js.map