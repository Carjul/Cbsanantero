"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[198],{4198:function(a,o,e){e.r(o),e.d(o,{default:function(){return X}});var r=e(3396),t=e(7139),l=e(9242);const s=a=>((0,r.dD)("data-v-914aa6f6"),a=a(),(0,r.Cn)(),a),i={class:"container"},n=s((()=>(0,r._)("hr",null,null,-1))),c={class:"row"},d={class:"card mb-4"},u=["onClick","src"],m={class:"card-body"},p=s((()=>(0,r._)("hr",null,null,-1))),f={class:"h3 text-decoration-none"},h=s((()=>(0,r._)("hr",null,null,-1))),b=s((()=>(0,r._)("p",{class:"card-text"},null,-1))),_={class:"d-flex justify-content-between"},g={class:"m-0"},D=s((()=>(0,r._)("i",{class:"fa fa-map-marker-alt text-primary mr-2"},null,-1))),v={class:"m-0"},y=s((()=>(0,r._)("i",{class:"fas fa-coins text-primary mr-2"},null,-1))),I=s((()=>(0,r._)("hr",null,null,-1))),w={key:0},C={key:1},k=["onClick"],S={class:"modal",id:"solicitudModal",tabindex:"-1",role:"dialog","aria-labelledby":"solicitudModalLabel","aria-hidden":"true"},R={class:"modal-dialog",role:"document"},x={class:"modal-content"},M={class:"modal-header"},U=s((()=>(0,r._)("h4",{class:"modal-title",id:"solicitudModalLabel"},"Solicitar Servicio",-1))),E={class:"modal-body"},N=s((()=>(0,r._)("b",null,[(0,r._)("p",null,"Creando servicio:")],-1))),V={class:"form-group"},A=s((()=>(0,r._)("label",{for:"nombre"},"Nombres:",-1))),B={class:"form-group"},z=s((()=>(0,r._)("label",{for:"correo"},"Correo:",-1))),F={class:"form-group"},H=s((()=>(0,r._)("label",{for:"celular"},"Numero de celular:",-1))),L={class:"form-group"},O=s((()=>(0,r._)("label",{for:"description"},"Descripcion:",-1))),Z={class:"form-group"},$=s((()=>(0,r._)("label",{for:"person"},"Personal:",-1)));function j(a,o,e,s,j,q){return(0,r.wg)(),(0,r.iD)("div",i,[n,(0,r._)("div",c,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(j.restaurantes,(a=>((0,r.wg)(),(0,r.iD)("div",{class:"col-md-4",key:a.id},[(0,r._)("div",d,[(0,r._)("img",{onClick:o=>q.enviarIdGaleria(a.customer_id,a._id),src:a.image,class:"card-img-top",alt:"Restaurante"},null,8,u),(0,r._)("div",m,[p,(0,r._)("p",f,(0,t.zw)(a.name),1),h,b,(0,r._)("div",_,[(0,r._)("h5",g,[D,(0,r.Uk)((0,t.zw)(a.address),1)]),(0,r._)("h5",v,[y,(0,r.Uk)((0,t.zw)(a.price),1)])]),I,null===j.customerRol?((0,r.wg)(),(0,r.iD)("div",w,[(0,r._)("button",{class:"btn btn-primary",onClick:o[0]||(o[0]=(...a)=>q.confirmarRegistro&&q.confirmarRegistro(...a))},"Solicitar servicio")])):(0,r.kq)("",!0),"Cliente"===j.customerRol?((0,r.wg)(),(0,r.iD)("div",C,[(0,r._)("button",{class:"btn btn-primary","data-toggle":"modal","data-target":"#solicitudModal",onClick:o=>q.enviarcid(a.customer_id,a._id)},"Obtener Servicio",8,k)])):(0,r.kq)("",!0)])])])))),128))]),(0,r._)("div",S,[(0,r._)("div",R,[(0,r._)("div",x,[(0,r._)("div",M,[U,(0,r._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:o[1]||(o[1]=(...a)=>q.cerrarModal&&q.cerrarModal(...a))},"X")]),(0,r._)("div",E,[N,(0,r._)("form",null,[(0,r._)("div",V,[A,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"nombre",placeholder:"Describa nombre y apellido","onUpdate:modelValue":o[2]||(o[2]=a=>j.formData.nombre=a)},null,512),[[l.nr,j.formData.nombre]])]),(0,r._)("div",B,[z,(0,r.wy)((0,r._)("input",{type:"email",class:"form-control",placeholder:"Escriba su correo",id:"apellidos","onUpdate:modelValue":o[3]||(o[3]=a=>j.formData.correo=a)},null,512),[[l.nr,j.formData.correo]])]),(0,r._)("div",F,[H,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"celular",placeholder:"eje +57 304 000 4445","onUpdate:modelValue":o[4]||(o[4]=a=>j.formData.celular=a)},null,512),[[l.nr,j.formData.celular]])]),(0,r._)("div",L,[O,(0,r.wy)((0,r._)("textarea",{id:"description",placeholder:"Describa su solicitud",rows:"3","onUpdate:modelValue":o[5]||(o[5]=a=>j.formData.description=a)},null,512),[[l.nr,j.formData.description]])]),(0,r._)("div",Z,[$,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"person",placeholder:"Número de personas","onUpdate:modelValue":o[6]||(o[6]=a=>j.formData.person=a)},null,512),[[l.nr,j.formData.person]])]),(0,r._)("button",{type:"button",class:"btn btn-success",onClick:o[7]||(o[7]=(...a)=>q.submitForm&&q.submitForm(...a))},"Solicitar"),(0,r._)("button",{type:"button",class:"btn btn-secondary",onClick:o[8]||(o[8]=(...a)=>q.cerrarModal&&q.cerrarModal(...a))},"Cerrar")])])])])])])}e(560);var q=e(1076),G=e(2492),K=e.n(G),P={data(){return{restaurantes:[],customerRol:null,tipo:"Restaurante",formData:{nombre:"",celular:"",correo:"",description:"",person:"",entrada:"",salida:"",clienteId:null,negocioId:null,customer_id:null}}},mounted(){this.customerRol=localStorage.getItem("usuarioRol"),this.formData.clienteId=localStorage.getItem("customerId"),this.formData.nombre=localStorage.getItem("nombreUsuario"),this.formData.correo=localStorage.getItem("correoUsuario"),this.formData.celular=localStorage.getItem("celularUsuario"),this.formData.person=localStorage.getItem("person"),this.formData.entrada=localStorage.getItem("entrada"),this.formData.salida=localStorage.getItem("salida"),this.fetchRestaurantes()},methods:{async fetchRestaurantes(){try{const a=await q.Z.get("http://localhost:3000/app/Restaurante");this.restaurantes=a.data}catch(a){console.error("Error al obtener los restaurantes",a)}},async submitForm(){try{const a=await q.Z.post(`http://localhost:3000/app/pedirServicio?tipo=${this.tipo}`,this.formData);console.log(a),this.formData.customer_id=null,this.formData.negocioId=null,this.formData.description="",this.formData.person="",this.formData.entrada="",this.formData.salida="",await K().fire({title:"¡Bien hecho!",text:"¡Has enviado la solicitud con éxito!",icon:"success"}),window.location.reload()}catch(a){console.error("Error al enviar la solicitud",a)}},enviarIdGaleria(a,o){localStorage.setItem("customerNegocioId",a),localStorage.setItem("negocioId",o),this.$router.push({path:"/artegaleria"})},enviarcid(a,o){this.formData.customer_id=a,this.formData.negocioId=o},closeModal(){this.formData={_id:null,nombre:"",celular:"",correo:"",descripcion:"",person:"",entrada:"",salida:"",customerId:null}},confirmarRegistro(){K().fire({icon:"error",title:"Oops...",text:"Si desea solicitar un servicio, debe registrarse.",footer:'<a href="https://api.whatsapp.com/send?phone=573125637781&text=Hola%2C%20me%20gustar%C3%ADa%20tomar%20un%20servicio%20desde%20la%20plataforma%20COSTA%20BRISA.">Consutar en WhatsApp</a>'}).then((()=>{this.$router.push({path:"/resgister",name:"Res",component:()=>e.e(944).then(e.bind(e,5944))})}))},cerrarModal(){this.formData={nombre:"",celular:"",correo:"",description:"",person:"",entrada:"",salida:"",clienteId:null,negocioId:null,customer_id:null};const a=document.getElementById("solicitudModal");if(a){a.classList.remove("show"),a.style.display="none";const o=document.getElementsByClassName("modal-backdrop");document.body.removeChild(o[0])}}}},T=e(89);const W=(0,T.Z)(P,[["render",j],["__scopeId","data-v-914aa6f6"]]);var X=W}}]);
//# sourceMappingURL=198.008c37de.js.map