"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[771],{771:function(a,o,r){r.r(o),r.d(o,{default:function(){return aa}});var e=r(3396),t=r(7139),l=r(9242);const s=a=>((0,e.dD)("data-v-3e41e092"),a=a(),(0,e.Cn)(),a),i={class:"container"},n=s((()=>(0,e._)("hr",null,null,-1))),c={class:"row"},d={class:"card mb-4"},m=["onClick","src"],u={class:"card-body"},p=s((()=>(0,e._)("hr",null,null,-1))),f={class:"h3 text-decoration-none"},h=s((()=>(0,e._)("hr",null,null,-1))),_=s((()=>(0,e._)("p",{class:"card-text"},null,-1))),b={class:"d-flex justify-content-between"},g={class:"m-0"},D=s((()=>(0,e._)("i",{class:"fa fa-map-marker-alt text-primary mr-2"},null,-1))),v={class:"m-0"},y=s((()=>(0,e._)("i",{class:"fas fa-coins text-primary mr-2"},null,-1))),w=s((()=>(0,e._)("hr",null,null,-1))),I={key:0},C={key:1},k=["onClick"],S={class:"modal",id:"solicitudModal",tabindex:"-1",role:"dialog","aria-labelledby":"solicitudModalLabel","aria-hidden":"true"},x={class:"modal-dialog",role:"document"},U={class:"modal-content"},M={class:"modal-header"},R=s((()=>(0,e._)("h4",{class:"modal-title",id:"solicitudModalLabel"},"Solicitar Servicio",-1))),V={class:"modal-body"},E=s((()=>(0,e._)("b",null,[(0,e._)("p",null,"Creando servicio:")],-1))),T={class:"form-group"},N=s((()=>(0,e._)("label",{for:"nombre"},"Nombres:",-1))),q={class:"form-group"},A=s((()=>(0,e._)("label",{for:"correo"},"Correo:",-1))),B={class:"form-group"},z=s((()=>(0,e._)("label",{for:"celular"},"Numero de celular:",-1))),F={class:"form-group"},H=s((()=>(0,e._)("label",{for:"description"},"Descripcion:",-1))),L={class:"form-group"},O=s((()=>(0,e._)("label",{for:"person"},"Personal:",-1))),Z={class:"form-group"},$=s((()=>(0,e._)("label",{for:"entrada"},"Entrada:",-1))),j={class:"form-group"},G=s((()=>(0,e._)("label",{for:"salida"},"Salida:",-1)));function K(a,o,r,s,K,P){return(0,e.wg)(),(0,e.iD)("div",i,[n,(0,e._)("div",c,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(K.transportes,(a=>((0,e.wg)(),(0,e.iD)("div",{class:"col-md-4",key:a.id},[(0,e._)("div",d,[(0,e._)("img",{onClick:o=>P.enviarIdGaleria(a.customer_id,a._id),src:a.image,class:"card-img-top",alt:"Trasporte"},null,8,m),(0,e._)("div",u,[p,(0,e._)("p",f,(0,t.zw)(a.name),1),h,_,(0,e._)("div",b,[(0,e._)("h5",g,[D,(0,e.Uk)((0,t.zw)(a.address),1)]),(0,e._)("h5",v,[y,(0,e.Uk)((0,t.zw)(a.price),1)])]),w,null===K.customerRol?((0,e.wg)(),(0,e.iD)("div",I,[(0,e._)("button",{class:"btn btn-primary",onClick:o[0]||(o[0]=(...a)=>P.confirmarRegistro&&P.confirmarRegistro(...a))},"Solicitar servicio")])):(0,e.kq)("",!0),"Cliente"===K.customerRol?((0,e.wg)(),(0,e.iD)("div",C,[(0,e._)("button",{class:"btn btn-primary","data-toggle":"modal","data-target":"#solicitudModal",onClick:o=>P.enviarcid(a.customer_id,a._id)},"Obtener Servicio",8,k)])):(0,e.kq)("",!0)])])])))),128))]),(0,e._)("div",S,[(0,e._)("div",x,[(0,e._)("div",U,[(0,e._)("div",M,[R,(0,e._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:o[1]||(o[1]=(...a)=>P.cerrarModal&&P.cerrarModal(...a))},"X")]),(0,e._)("div",V,[E,(0,e._)("form",null,[(0,e._)("div",T,[N,(0,e.wy)((0,e._)("input",{type:"text",class:"form-control",id:"nombre",placeholder:"Describa nombre y apellido","onUpdate:modelValue":o[2]||(o[2]=a=>K.formData.nombre=a)},null,512),[[l.nr,K.formData.nombre]])]),(0,e._)("div",q,[A,(0,e.wy)((0,e._)("input",{type:"email",class:"form-control",placeholder:"Escriba su correo",id:"apellidos","onUpdate:modelValue":o[3]||(o[3]=a=>K.formData.correo=a)},null,512),[[l.nr,K.formData.correo]])]),(0,e._)("div",B,[z,(0,e.wy)((0,e._)("input",{type:"text",class:"form-control",id:"celular",placeholder:"eje +57 304 000 4445","onUpdate:modelValue":o[4]||(o[4]=a=>K.formData.celular=a)},null,512),[[l.nr,K.formData.celular]])]),(0,e._)("div",F,[H,(0,e.wy)((0,e._)("textarea",{id:"description",placeholder:"Describa su solicitud",rows:"3","onUpdate:modelValue":o[5]||(o[5]=a=>K.formData.description=a)},null,512),[[l.nr,K.formData.description]])]),(0,e._)("div",L,[O,(0,e.wy)((0,e._)("input",{type:"text",class:"form-control",id:"person",placeholder:"Número de personas","onUpdate:modelValue":o[6]||(o[6]=a=>K.formData.person=a)},null,512),[[l.nr,K.formData.person]])]),(0,e._)("div",Z,[$,(0,e.wy)((0,e._)("input",{type:"date",class:"form-control",id:"entrada","onUpdate:modelValue":o[7]||(o[7]=a=>K.formData.entrada=a),required:""},null,512),[[l.nr,K.formData.entrada]])]),(0,e._)("div",j,[G,(0,e.wy)((0,e._)("input",{type:"date",class:"form-control",id:"salida","onUpdate:modelValue":o[8]||(o[8]=a=>K.formData.salida=a),required:""},null,512),[[l.nr,K.formData.salida]])]),(0,e._)("button",{type:"button",class:"btn btn-success",onClick:o[9]||(o[9]=(...a)=>P.submitForm&&P.submitForm(...a))},"Solicitar"),(0,e._)("button",{type:"button",class:"btn btn-secondary",onClick:o[10]||(o[10]=(...a)=>P.cerrarModal&&P.cerrarModal(...a))},"Cerrar")])])])])])])}r(560);var P=r(1076),W=r(2492),X=r.n(W),Y={data(){return{transportes:[],customerRol:null,tipo:"Trasporte",formData:{nombre:"",celular:"",correo:"",description:"",person:"",entrada:"",salida:"",clienteId:null,negocioId:null,customer_id:null}}},mounted(){this.customerRol=localStorage.getItem("usuarioRol"),this.formData.clienteId=localStorage.getItem("customerId"),this.formData.nombre=localStorage.getItem("nombreUsuario"),this.formData.correo=localStorage.getItem("correoUsuario"),this.formData.celular=localStorage.getItem("celularUsuario"),this.formData.person=localStorage.getItem("person"),this.formData.entrada=localStorage.getItem("entrada"),this.formData.salida=localStorage.getItem("salida"),this.fetchTransportes()},methods:{async fetchTransportes(){try{const a=await P.Z.get("http://localhost:3000/app/Trasporte");this.transportes=a.data}catch(a){console.error("Error al obtener los trasportes",a)}},async submitForm(){try{const a=await P.Z.post(`http://localhost:3000/app/pedirServicio?tipo=${this.tipo}`,this.formData);console.log(a),this.formData.customer_id=null,this.formData.negocioId=null,this.formData.description="",this.formData.person="",this.formData.entrada="",this.formData.salida="",await X().fire({title:"¡Bien hecho!",text:"¡Has enviado la solicitud con éxito!",icon:"success"}),window.location.reload()}catch(a){console.error("Error al enviar la solicitud",a)}},enviarIdGaleria(a,o){localStorage.setItem("customerNegocioId",a),localStorage.setItem("negocioId",o),this.$router.push({path:"/artegaleria"})},enviarcid(a,o){this.formData.customer_id=a,this.formData.negocioId=o},closeModal(){this.formData={_id:null,nombre:"",celular:"",correo:"",description:"",person:"",entrada:"",salida:"",customerId:null}},confirmarRegistro(){X().fire({icon:"error",title:"Oops...",text:"Si desea solicitar un servicio, debe registrarse.",footer:'<a href="https://api.whatsapp.com/send?phone=573125637781&text=Hola%2C%20me%20gustar%C3%ADa%20tomar%20un%20servicio%20desde%20la%20plataforma%20COSTA%20BRISA.">Consutar en WhatsApp</a>'}).then((()=>{this.$router.push({path:"/resgister",name:"Res",component:()=>r.e(944).then(r.bind(r,5944))})}))},cerrarModal(){this.formData={nombre:"",celular:"",correo:"",description:"",person:"",entrada:"",salida:"",clienteId:null,negocioId:null,customer_id:null};const a=document.getElementById("solicitudModal");if(a){a.classList.remove("show"),a.style.display="none";const o=document.getElementsByClassName("modal-backdrop");document.body.removeChild(o[0])}}}},J=r(89);const Q=(0,J.Z)(Y,[["render",K],["__scopeId","data-v-3e41e092"]]);var aa=Q}}]);
//# sourceMappingURL=771.72aa2321.js.map