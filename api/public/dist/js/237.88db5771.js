"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[237],{8237:function(e,o,a){a.r(o),a.d(o,{default:function(){return We}});var l=a(3396),t=a(7139),r=a(9242);const i={id:"app"},s={class:"container"},n=(0,l._)("br",null,null,-1),c={class:"card"},d=(0,l._)("h5",{class:"card-header"},"Panel de Clientes",-1),u={class:"card-body"},p=(0,l._)("h5",{class:"card-title"},"Creacion de Usuario",-1),m=(0,l._)("p",{class:"card-text"},"En este espacio creamos nuevos usuarorios para COSTA BRISA",-1),_=(0,l._)("hr",null,null,-1),h=(0,l._)("strong",null,"Todos los clientes",-1),f=(0,l._)("hr",null,null,-1),v={class:"row"},g={class:"card"},C=["src"],w={class:"card-body"},b={class:"card-title"},y={class:"card-text"},A={class:"card-text"},z={class:"card-text"},k={class:"card-text"},M={class:"card-text"},V={class:"card-text"},q={key:0,class:"card-text"},x={class:"form-check form-switch"},E=["checked","onChange"],R={class:"form-check-label position-absolute",for:"leverSwitch"},T=["onClick"],U=["onClick"],H={ref:"modalCrear",class:"modal fade",id:"modalCrear",tabindex:"",role:"dialog","aria-labelledby":"modalCrearLabel","aria-hidden":"true"},S={class:"modal-dialog",role:"document"},j={class:"modal-content"},D={class:"modal-header"},$=(0,l._)("h5",{class:"modal-title",id:"modalCrearLabel"},"Crear Cliente",-1),F=(0,l._)("span",{"aria-hidden":"true"},"×",-1),L=[F],N={class:"modal-body"},P={class:"row"},Z={class:"col-md-6"},I={class:"form-group"},B=(0,l._)("label",{for:"newName"},"Nombre:",-1),G={class:"form-group"},J=(0,l._)("label",{for:"file"},"Imagen:",-1),K={class:"form-group"},O=(0,l._)("label",{for:"newEmail"},"Email:",-1),Y={class:"form-group"},Q=(0,l._)("label",{for:"newEmail"},"Contraseña:",-1),W={class:"col-md-6"},X={class:"form-group"},ee=(0,l._)("label",{for:"newAddress"},"Dirección:",-1),oe={class:"form-group"},ae=(0,l._)("label",{for:"newPhone"},"Teléfono:",-1),le={class:"form-group"},te=(0,l._)("label",{for:"newRol"},[(0,l._)("span",null,"Rol:")],-1),re=(0,l._)("option",{value:"Admin"},"Admin",-1),ie=(0,l._)("option",{value:"Cliente"},"Cliente",-1),se=(0,l._)("option",{value:"Vendedor"},"Vendedor",-1),ne=[re,ie,se],ce={key:0,class:"form-group"},de=(0,l._)("label",{for:"newRol"},[(0,l._)("span",null,"Tipo Negocio")],-1),ue=(0,l.uE)('<option value="Transporte">Transporte</option><option value="Hospedaje">Hospedaje</option><option value="Tour">Tour</option><option value="Hoteles">Hoteles</option><option value="Restaurantes">Restaurantes</option><option value="Recreación">Recreación</option><option value="Bares">Bares y discotecas</option><option value="Artesanías">Artesanías</option>',8),pe=[ue],me=(0,l._)("button",{type:"submit",class:"btn btn-primary"},"Crear Cliente",-1),_e={ref:"modalActualizar",class:"modal fade",id:"modalActualizar",tabindex:"-1",role:"dialog","aria-labelledby":"modalActualizarLabel","aria-hidden":"true"},he={class:"modal-dialog",role:"document"},fe={class:"modal-content"},ve={class:"modal-header"},ge=(0,l._)("h5",{class:"modal-title",id:"modalActualizarLabel"},"Actualizar Cliente",-1),Ce=(0,l._)("span",{"aria-hidden":"true"},"×",-1),we=[Ce],be={class:"modal-body"},ye={class:"form-group col-md-6"},Ae=(0,l._)("label",{for:"name"},"Nombre:",-1),ze={class:"form-group col-md-6"},ke=(0,l._)("label",{for:"email"},"Email:",-1),Me={class:"form-group col-md-6"},Ve=(0,l._)("label",{for:"password"},"Contraseña:",-1),qe={class:"form-group col-md-6"},xe=(0,l._)("label",{for:"imagenHospedajeActualizar"},"Imagen:",-1),Ee={class:"form-group col-md-6"},Re=(0,l._)("label",{for:"address"},"Address:",-1),Te={class:"form-group col-md-6"},Ue=(0,l._)("label",{for:"phone"},"Phone:",-1),He={class:"form-group col-md-6"},Se=(0,l._)("label",{for:"newRol"},"Rol:",-1),je=(0,l._)("option",{value:"Admin"},"Admin",-1),De=(0,l._)("option",{value:"Cliente"},"Cliente",-1),$e=(0,l._)("option",{value:"Vendedor"},"Vendedor",-1),Fe=[je,De,$e],Le={key:0,class:"form-group col-md-6"},Ne=(0,l._)("label",{for:"tipo_negocio"},"Tipo Negocio",-1),Pe=(0,l.uE)('<option value="Transporte">Transporte</option><option value="Hospedaje">Hospedaje</option><option value="Tour">Tour</option><option value="Hoteles">Hoteles</option><option value="Artesanías">Artesanías</option><option value="Bares">Bares y discotecas</option><option value="Restaurantes">Restaurantes</option><option value="Juegos">Recreación</option>',8),Ze=[Pe],Ie={class:"form-group col-12"},Be={class:"modal-footer"},Ge={key:0,class:"text-success"};function Je(e,o,a,F,re,ie){return(0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",s,[n,(0,l._)("div",c,[d,(0,l._)("div",u,[p,m,(0,l._)("button",{class:"btn btn-success mb-4",onClick:o[0]||(o[0]=(...e)=>ie.abrirModalCrear&&ie.abrirModalCrear(...e))},"Crear")])]),_,h,f,(0,l._)("div",v,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(re.customers,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e._id,class:"col-md-4 mb-4"},[(0,l._)("div",g,[(0,l._)("img",{src:e.image,class:"card-img-top",alt:"Profile Image"},null,8,C),(0,l._)("div",w,[(0,l._)("h5",b,(0,t.zw)(e.name),1),(0,l._)("p",y,"Email: "+(0,t.zw)(e.email),1),(0,l._)("p",A,"Contraseña: "+(0,t.zw)(e.password),1),(0,l._)("p",z,"Address: "+(0,t.zw)(e.address),1),(0,l._)("p",k,"Phone: "+(0,t.zw)(e.phone),1),(0,l._)("p",M,"Role: "+(0,t.zw)(e.rol),1),(0,l._)("p",V,"Peticiones: "+(0,t.zw)(e.servicio),1),"Vendedor"===e.rol?((0,l.wg)(),(0,l.iD)("p",q,"Tipo Negocio: "+(0,t.zw)(e.tipo_negocio),1)):(0,l.kq)("",!0),(0,l._)("div",x,[(0,l._)("input",{type:"checkbox",checked:"Activo"===e.status,class:"form-check-input position-relative",id:"leverSwitch",onChange:o=>ie.statusCustomer(o,e)},null,40,E),(0,l._)("label",R,(0,t.zw)("Activo"===e.status?"Active":"Inactive"),1)]),(0,l._)("button",{class:"btn btn-danger",onClick:o=>ie.eliminarCliente(e._id)},"Eliminar",8,T),(0,l._)("button",{class:"btn btn-primary",onClick:o=>ie.abrirModalActualizar(e)},"Actualizar",8,U)])])])))),128))])]),(0,l._)("div",H,[(0,l._)("div",S,[(0,l._)("div",j,[(0,l._)("div",D,[$,(0,l._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:o[1]||(o[1]=(...e)=>ie.cerrarModalCrear&&ie.cerrarModalCrear(...e))},L)]),(0,l._)("div",N,[(0,l._)("form",{onSubmit:o[10]||(o[10]=(0,r.iM)(((...e)=>ie.crearCliente&&ie.crearCliente(...e)),["prevent"]))},[(0,l._)("div",P,[(0,l._)("div",Z,[(0,l._)("div",I,[B,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=e=>re.nuevoCliente.name=e),class:"form-control",id:"newName",required:""},null,512),[[r.nr,re.nuevoCliente.name]])]),(0,l._)("div",G,[J,(0,l._)("input",{class:"form-control",accept:"image/jpeg, image/jpg, image/png",onChange:o[3]||(o[3]=(...e)=>ie.uploadFile&&ie.uploadFile(...e)),id:"file",ref:"file",type:"file",s:"",tyle:"display:none"},null,544)]),(0,l._)("div",K,[O,(0,l.wy)((0,l._)("input",{type:"email","onUpdate:modelValue":o[4]||(o[4]=e=>re.nuevoCliente.email=e),class:"form-control",id:"newEmail",required:""},null,512),[[r.nr,re.nuevoCliente.email]])]),(0,l._)("div",Y,[Q,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=e=>re.nuevoCliente.password=e),class:"form-control",id:"newEmail",required:""},null,512),[[r.nr,re.nuevoCliente.password]])])]),(0,l._)("div",W,[(0,l._)("div",X,[ee,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=e=>re.nuevoCliente.address=e),class:"form-control",id:"newAddress",required:""},null,512),[[r.nr,re.nuevoCliente.address]])]),(0,l._)("div",oe,[ae,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=e=>re.nuevoCliente.phone=e),class:"form-control",id:"newPhone",required:""},null,512),[[r.nr,re.nuevoCliente.phone]])]),(0,l._)("div",le,[te,(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":o[8]||(o[8]=e=>re.nuevoCliente.rol=e),class:"form-control",id:"newRol",required:""},ne,512),[[r.bM,re.nuevoCliente.rol]])]),"Vendedor"===re.nuevoCliente.rol?((0,l.wg)(),(0,l.iD)("div",ce,[de,(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":o[9]||(o[9]=e=>re.nuevoCliente.tipo_negocio=e),class:"form-control",id:"newRol",required:""},pe,512),[[r.bM,re.nuevoCliente.tipo_negocio]])])):(0,l.kq)("",!0)])]),me],32)])])])],512),(0,l._)("div",_e,[(0,l._)("div",he,[(0,l._)("div",fe,[(0,l._)("div",ve,[ge,(0,l._)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:o[11]||(o[11]=(...e)=>ie.cerrarModalActualizar&&ie.cerrarModalActualizar(...e))},we)]),(0,l._)("div",be,[(0,l._)("form",{onSubmit:o[21]||(o[21]=(0,r.iM)(((...o)=>e.actualizarCliente&&e.actualizarCliente(...o)),["prevent"])),class:"row"},[(0,l._)("div",ye,[Ae,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":o[12]||(o[12]=e=>re.clienteActualizado.name=e),class:"form-control",id:"name",required:""},null,512),[[r.nr,re.clienteActualizado.name]])]),(0,l._)("div",ze,[ke,(0,l.wy)((0,l._)("input",{type:"email","onUpdate:modelValue":o[13]||(o[13]=e=>re.clienteActualizado.email=e),class:"form-control",id:"email",required:""},null,512),[[r.nr,re.clienteActualizado.email]])]),(0,l._)("div",Me,[Ve,(0,l.wy)((0,l._)("input",{type:"password","onUpdate:modelValue":o[14]||(o[14]=e=>re.clienteActualizado.password=e),class:"form-control",id:"password",required:""},null,512),[[r.nr,re.clienteActualizado.password]])]),(0,l._)("div",qe,[xe,(0,l._)("input",{class:"form-control",accept:"image/jpeg, image/jpg, image/png",onChange:o[15]||(o[15]=(...e)=>ie.uploadFileActualizar&&ie.uploadFileActualizar(...e)),id:"imagenHospedajeActualizar",ref:"fileActualizar",type:"file"},null,544)]),(0,l._)("div",Ee,[Re,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":o[16]||(o[16]=e=>re.clienteActualizado.address=e),class:"form-control",id:"address",required:""},null,512),[[r.nr,re.clienteActualizado.address]])]),(0,l._)("div",Te,[Ue,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":o[17]||(o[17]=e=>re.clienteActualizado.phone=e),class:"form-control",id:"phone",required:""},null,512),[[r.nr,re.clienteActualizado.phone]])]),(0,l._)("div",He,[Se,(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":o[18]||(o[18]=e=>re.clienteActualizado.rol=e),class:"form-control",id:"newRol",required:""},Fe,512),[[r.bM,re.clienteActualizado.rol]])]),"Vendedor"===re.clienteActualizado.rol?((0,l.wg)(),(0,l.iD)("div",Le,[Ne,(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":o[19]||(o[19]=e=>re.clienteActualizado.tipo_negocio=e),class:"form-control",id:"tipo_negocio",required:""},Ze,512),[[r.bM,re.clienteActualizado.tipo_negocio]])])):(0,l.kq)("",!0),(0,l._)("div",Ie,[(0,l._)("button",{type:"submit",onClick:o[20]||(o[20]=e=>ie.ActualizarCustomer(re.clienteActualizado,re.clienteActualizado._id)),class:"btn btn-primary"},"Guardar Cambios")])],32)]),(0,l._)("div",Be,[e.successMessage?((0,l.wg)(),(0,l.iD)("p",Ge,(0,t.zw)(e.successMessage),1)):(0,l.kq)("",!0)])])])],512)])}var Ke=a(1076),Oe={data(){return{customers:[],clienteActualizado:{_id:null,name:"",email:"",password:"",address:"",phone:"",rol:"",tipo_negocio:""},file:null,fileActualizar:null,nuevoCliente:{name:"",image:"",email:"",password:"",address:"",phone:"",rol:null,tipo_negocio:null}}},mounted(){this.fetchCustomers()},methods:{async fetchServicio(e){try{const o=await Ke.Z.get(`http://localhost:3000/app/pedirServicioc/${e}`);return console.log(o.data.length),o.data.length}catch(o){console.error("Error fetching customers:",o)}},async fetchCustomers(){let e=localStorage.getItem("customerId");try{const o=await Ke.Z.get("http://localhost:3000/app/Customer");let a=o.data.filter((o=>o._id!==e));if(a.length>0){for(let e=0;e<a.length;e++){const o=a[e];let l=await this.fetchServicio(o._id);o.servicio=void 0!==l?l:0}this.customers=a||[]}}catch(o){console.error("Error fetching customers:",o)}},async statusCustomer(e,o){try{const a=await Ke.Z.put(`http://localhost:3000/app/customerStatus/${o._id}`,{status:e.target.checked});console.log(a.data)}catch(a){a.response?(console.error("Error de respuesta:",a.response.data),console.error("Código de estado HTTP:",a.response.status)):a.request?console.error("No se recibió respuesta del servidor:",a.request):console.error("Error al configurar la solicitud:",a.message)}this.fetchCustomers()},async eliminarCliente(e){try{await Ke.Z.delete(`http://localhost:3000/app/Customer/${e}`),this.fetchCustomers()}catch(o){console.error("Error deleting customer:",o)}},abrirModalActualizar(e){this.clienteActualizado={...e};const o=this.$refs.modalActualizar;o&&(o.classList.add("show"),o.style.display="block")},async ActualizarCustomer(e,o){if(this.fileActualizar){const l=new FormData;l.append("name",e.name),l.append("email",e.email),l.append("password",e.password),l.append("address",e.address),l.append("phone",e.phone),l.append("rol",e.rol),l.append("tipo_negocio",e.tipo_negocio),l.append("image",""),l.append("imagen",this.fileActualizar);try{const e=await Ke.Z.put(`http://localhost:3000/app/Customer/${o}`,l);console.log(e),this.fetchCustomers(),this.cerrarModalActualizar(),this.fileActualizar=null}catch(a){console.error("Error updating customer:",a)}}else try{const a=await Ke.Z.put(`http://localhost:3000/app/Customer/${o}`,e);console.log(a),this.fetchCustomers(),this.cerrarModalActualizar()}catch(a){console.error("Error updating customer:",a)}},uploadFile(e){this.file=e.target.files[0]},uploadFileActualizar(e){this.fileActualizar=e.target.files[0]},cerrarModalActualizar(){const e=this.$refs.modalActualizar;e&&(e.classList.remove("show"),e.style.display="none")},abrirModalCrear(){const e=this.$refs.modalCrear;e&&(e.classList.add("show"),e.style.display="block")},cerrarModalCrear(){const e=this.$refs.modalCrear;e&&(e.classList.remove("show"),e.style.display="none")},async crearCliente(){try{const e=new FormData;e.append("name",this.nuevoCliente.name),e.append("image",this.file),e.append("email",this.nuevoCliente.email),e.append("password",this.nuevoCliente.password),e.append("address",this.nuevoCliente.address),e.append("phone",this.nuevoCliente.phone),e.append("rol",this.nuevoCliente.rol),e.append("tipo_negocio",this.nuevoCliente.tipo_negocio);const o=await Ke.Z.post("http://localhost:3000/app/Customer",e);console.log(o.data),this.fetchCustomers(),this.nuevoCliente={name:"",image:"",email:"",password:"",address:"",phone:"",rol:""},this.cerrarModalCrear()}catch(e){console.error("Error creando cliente:",e)}}}},Ye=a(89);const Qe=(0,Ye.Z)(Oe,[["render",Je]]);var We=Qe}}]);
//# sourceMappingURL=237.88db5771.js.map